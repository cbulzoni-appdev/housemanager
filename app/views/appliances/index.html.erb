<div>
  <div>
    <h1>
      List of all appliances
    </h1>
  </div>
</div>

<hr>

<div>
  <div>
    <h2>
      Add a new appliance
    </h2>

    <form action="/insert_appliance" method="post">

      <div>
        <label for="house_id_box">
          House
        </label>
        
        <select type="text" id="house_id_box" name="query_house_id">
        <% @current_user.houses.each do |a_house|%>
          <Option value="<%= a_house.id %>"><%= a_house.street_address %></option>
        <% end %>
        </select>
      </div>

      <div>
        <label for="appliance_type_box">
          Appliance type
        </label>

        <select type="text" id="appliance_type_box" name="query_appliance_type">
          <option value="Air Conditioner">Air Conditioner</option>
          <option value="Water Heater">Water Heater</option>
          <option value="Sump Pump">Sump Pump</option>
          <option value="Furnace">Furnace</option>
          <option value="Range">Range</option>
          <option value="Oven">Oven</option>
          <option value="Stove">Stove</option>
          <option value="Microwave">Microwave</option>
          <option value="Dishwasher">Dishwasher</option>
          <option value="Washing Machine">Washing Machine</option>
          <option value="Dryer">Dryer</option>
          <option value="Other">Other</option>
        </select>
      </div>

      <div>
        <label for="make_box">
          Make
        </label>

        <input type="text" id="make_box" name="query_make">
      </div>

      <div>
        <label for="model_box">
          Model
        </label>

        <input type="text" id="model_box" name="query_model">
      </div>

      <div>
        <label for="year_box">
          Year
        </label>

        <input type="text" id="year_box" name="query_year">
      </div>

      <div>
        <label for="last_serviced_box">
          Last serviced
        </label>

        <input type="date" id="last_serviced_box" name="query_last_serviced">
      </div>

      <div>
        <label for="notes_box">
          Notes
        </label>

        <textarea id="notes_box" name="query_notes" rows="3"></textarea>
      </div>

      <div>
        <label for="contact_id_box">
          Contact
        </label>
        
        <select type="text" id="contact_id_box" name="query_contact_id">
        <% @current_user.contacts.each do |a_contact|%>
          <% if a_contact.contact_name != nil %>
            <Option value="<%= a_contact.id %>"><%= a_contact.contact_name %></option>
          <% else %>
            <Option value="<%= a_contact.id %>"><%= a_contact.company_name %></option>
          <% end %>
        <% end %>
        </select>
      </div>

      <button>
        Create appliance
      </button>
    </form>
  </div>
</div>

<hr>
<div>
  <div>
    <table border="1">
      <tr>
        <th>
          Category
        </th>

        <th>
          Appliance type
        </th>

        <th>
          Make
        </th>

        <th>
          Model
        </th>

        <th>
          Year
        </th>

        <th>
          Last serviced
        </th>

        <th>
          Service due
        </th>

        <th>
          Contact
        </th>

        <th>
          Notes
        </th>

        <th>
          House
        </th>

        <th>
        </th>
      </tr>

      <% @list_of_appliances.each do |an_appliance| %>
      <tr>
        <td>
          <%= an_appliance.category %>
        </td>

        <td>
          <%= an_appliance.appliance_type %>
        </td>

        <td>
          <%= an_appliance.make %>
        </td>

        <td>
          <%= an_appliance.model %>
        </td>

        <td>
          <%= an_appliance.year %>
        </td>

        <td>
          <%= an_appliance.last_serviced %>
        </td>

        <td>
          <%= an_appliance.service_due %>
        </td>

        <% if an_appliance.contact_id != nil %>
          <% if an_appliance.contact.contact_name != nil %>
            <td>
              <a class="btn btn-primary" href="/contacts/<%= an_appliance.contact.id %>" role="button">
                <%= an_appliance.contact.contact_name %>
              </a>
            </td>
          <% else %>
            <td>
              <a class="btn btn-primary" href="/contacts/<%= an_appliance.contact.id %>" role="button">
                <%= an_appliance.contact.company_name %>
              </a>
            </td>
          <% end %>
        <% else %>
          <td>
          </td>
        <% end %>

        <td>
          <%= an_appliance.notes %>
        </td>

        <td>
          <%= an_appliance.house.street_address %>
        </td>

        <td>
          <a class="btn btn-primary" href="/appliances/<%= an_appliance.id %>" role="button">
            Show details
          </a>
        </td>
      </tr>
      <% end %>
    </table>
  </div>
</div>

<hr>
